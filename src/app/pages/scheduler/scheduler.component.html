<div class="flex w-screen h-screen">
  <app-sidebar></app-sidebar>
  <div class="scheduler-container">
    <dx-scheduler
      timeZone="Europe/Berlin"
      dateSerializationFormat="yyyy-MM-ddTHH:mm:ss"
      [dataSource]="appointments"
      [views]="['day', 'week', 'workWeek', 'month', 'agenda']"
      [currentView]="currentView"
      [currentDate]="currentDate"
      [firstDayOfWeek]="1"
      [startDayHour]="8"
      [endDayHour]="20"
      [showAllDayPanel]="true"
      [height]="'100vh'"
      [editing]="{
        allowAdding: true,
        allowDeleting: true,
        allowUpdating: true,
        allowDragging: true
      }"
      appointmentTemplate="appointmentTemplate"
      (onAppointmentFormOpening)="onAppointmentFormOpening($event)"
      (onAppointmentAdded)="onAppointmentAdded($event)"
      (onAppointmentUpdated)="onAppointmentUpdated($event)"
      (onAppointmentDeleted)="onAppointmentDeleted($event)"
    >
      <dxi-resource
        fieldExpr="isCompleted"
        label="Completion Status"
        [dataSource]="isCompleted"
        displayExpr="text"
        valueExpr="id"
        [useColorAsDefault]="true"
      >
      </dxi-resource>
      <!-- * Template Della vista dell'appuntamneto nello Schedulers -->
      <div *dxTemplate="let data of 'appointmentTemplate'" [class]="getAppointmentClass(data)">
        <div>
          <div class="appointment-title">{{data.appointmentData.text}}</div>
          <div class="appointment-time">
            {{formatAppointmentDate(data.appointmentData.startDate)}} -
            {{formatAppointmentDate(data.appointmentData.endDate)}}
          </div>
          <div class="appointment-status">
            {{data.appointmentData.isCompleted ? 'Completed' : 'Not Completed'}}
          </div>
        </div>
      </div>
      <!-- ********************************************************* -->
    </dx-scheduler>
  </div>
  <div class="w-full h-full ps-2 pe-2 pb-2">
    <app-chat></app-chat>
  </div>
</div>
